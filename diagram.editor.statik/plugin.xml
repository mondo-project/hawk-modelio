<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?> 
<plugin>
    <extension id="diagram.statik" point="org.eclipse.e4.workbench.model">
      <fragment
            uri="e4model/diagram_statik_editor.e4xmi">
      </fragment>
      <processor beforefragment="true" class="org.modelio.diagram.editor.statik.plugin.StaticProcessor"/>
   </extension>
    
    <extension point="org.modelio.diagram.editor.inputprovider">
      <inputprovider class="org.modelio.diagram.editor.statik.editor.StaticDiagramEditorInputProvider"/>
   </extension>
        
    <extension point="org.eclipse.core.expressions.definitions">
		<definition id="diagram.editor.statik.test.redrawlink.id">
			<test property="diagram.editor.statik.test.redrawlink"/>
		</definition>
		<definition id="diagram.editor.statik.test.iscompositionlink.id">
			<test property="diagram.editor.statik.test.iscompositionlink"/>
		</definition>
  <definition
        id="diagram.editor.statik.expr.showunmaskmenu">
     <and>
        <test
              property="diagram.editor.statik.test.iscompositionlink">
        </test>
        <reference
              definitionId="org.modelio.diagram.editor.corexp.has-gmmodel.id">
        </reference>
     </and>
  </definition>
	</extension>
  
	<extension point="org.eclipse.core.expressions.propertyTesters">
		<propertyTester
			class="org.modelio.diagram.editor.statik.elements.namespacinglink.redraw.RedrawLinkCommandPropertyTester"
			id="diagram.editor.statik.redrawlink.propertyTester.updatevisible"
			namespace="diagram.editor.statik.test"
			properties="redrawlink"
			type="org.eclipse.jface.viewers.ISelection">
		</propertyTester>
		<propertyTester
			class="org.modelio.diagram.editor.statik.corexp.CompositionLinkTester"
			id="diagram.editor.statik.iscompositionlink.propertyTester.updatevisible"
			namespace="diagram.editor.statik.test"
			properties="iscompositionlink"
			type="org.eclipse.jface.viewers.ISelection">
		</propertyTester>
	</extension> 
   
    <extension point="org.modelio.diagram.editor.toolregistry"> 
		<creationtool id="CREATE_ATTRIBUTE" label="%Attribute.label" tooltip="%Attribute.tooltip" interactor="point">
			<context metaclass="Attribute" dependency="part" />
		</creationtool>
        <creationtool id="CREATE_CLASS" label="%Class.label" tooltip="%Class.tooltip" interactor="node">
			<context metaclass="Class" dependency="OwnedElement" />
		</creationtool>
		<creationtool id="CREATE_OPERATION" label="%Operation.label" tooltip="%Operation.tooltip" interactor="node">
			<context metaclass="Operation" dependency="part" />
		</creationtool>
		<creationtool id="CREATE_CONSTRUCTOR" label="%Constructor.label" tooltip="%Constructor.tooltip" interactor="point">
			<context metaclass="Operation" dependency="part" stereotype="create"/>
		</creationtool>
		<creationtool id="CREATE_SIGNAL" label="%Signal.label" tooltip="%Signal.tooltip" interactor="node">
			<context dependency="part" metaclass="Signal"/>
		</creationtool>
		<creationtool id="CREATE_PORT" label="%Port.label" tooltip="%Port.tooltip" interactor="point">
			<context dependency="part" metaclass="Port"/>
		</creationtool>
		
		<creationtool id="CREATE_COLLABORATION" label="%Collaboration.label" tooltip="%Collaboration.tooltip" interactor="node">
			<context metaclass="Collaboration" dependency="null" />
		</creationtool>
		<creationtool id="CREATE_COLLABORATIONUSE" label="%CollaborationUse.label" tooltip="%CollaborationUse.tooltip" interactor="node">
			<context metaclass="CollaborationUse" dependency="null" />
		</creationtool>
		<creationtool id="CREATE_COMPONENT" label="%Component.label" tooltip="%Component.tooltip" interactor="node">
			<context metaclass="Component" dependency="null" />
		</creationtool>
		<creationtool id="CREATE_DATATYPE" label="%Datatype.label" tooltip="%Datatype.tooltip" interactor="node">
			<context metaclass="DataType" dependency="null" />
		</creationtool>
		<creationtool id="CREATE_ENUMERATION" label="%Enumeration.label" tooltip="%Enumeration.tooltip" interactor="node">
			<context metaclass="Enumeration" dependency="null" />
		</creationtool>
		<creationtool id="CREATE_ENUMERATIONLITERAL" label="%EnumerationLiteral.label" tooltip="%EnumerationLiteral.tooltip" interactor="node">
			<context metaclass="EnumerationLiteral" dependency="null" />
		</creationtool>
		<creationtool id="CREATE_INFORMATIONITEM" label="%InformationItem.label" tooltip="%InformationItem.tooltip" interactor="point">
			<context metaclass="InformationItem" dependency="null" />
		</creationtool>
        <creationtool id="CREATE_INFORMATIONFLOWNODE" label="%InformationFlowNode.label" tooltip="%InformationFlowNode.tooltip" interactor="point" icon="icons/realizedinformationflow.png">
        <context metaclass="InformationFlow" dependency="null" />
		</creationtool>
		<creationtool id="CREATE_INSTANCE" label="%Instance.label" tooltip="%Instance.tooltip" interactor="node">
			<context metaclass="Instance" dependency="null" >
				<property name="smart" value="true"/>
			</context>
		</creationtool>
		<creationtool id="CREATE_BINDABLEINSTANCE" label="%BindableInstance.label" tooltip="%BindableInstance.tooltip" interactor="node">
			<context metaclass="BindableInstance" dependency="null" >
				<property name="smart" value="true"/>
		</context>
		</creationtool>
		<creationtool id="CREATE_ATTRIBUTELINK" label="%AttributeLink.label" tooltip="%AttributeLink.tooltip" interactor="node">
			<context metaclass="AttributeLink" dependency="Slot"/>
		</creationtool>
		<creationtool id="CREATE_INTERFACE" label="%Interface.label" tooltip="%Interface.tooltip" interactor="node">
			<context metaclass="Interface" dependency="null" />
		</creationtool>
		<creationtool id="CREATE_PACKAGE" label="%Package.label" tooltip="%Package.tooltip" interactor="node">
			<context metaclass="Package" dependency="null" />
		</creationtool>
		<creationtool id="CREATE_IOPARAMETER" label="%IOParameter.label" tooltip="%IOParameter.tooltip" interactor="point">
			<context metaclass="Parameter" dependency="IO" />
		</creationtool>
		<creationtool id="CREATE_RETURN_PARAMETER" label="%ReturnParameter.label" tooltip="%ReturnParameter.tooltip" interactor="point">
			<context metaclass="Parameter" dependency="Return" />
		</creationtool>
		<creationtool id="CREATE_PROVIDED_INTERFACE" label="%ProvidedInterface.label" tooltip="%ProvidedInterface.tooltip" interactor="linkToVoid">
			<context metaclass="ProvidedInterface" dependency="null" router="PROVIDEDINTERFACE_CONNECTIONROUTER">
			</context>	
		</creationtool>
		<creationtool id="CREATE_REQUIRED_INTERFACE" label="%RequiredInterface.label" tooltip="%RequiredInterface.tooltip" interactor="linkToVoid">
			<context metaclass="RequiredInterface" dependency="Required" router="REQUIREDINTERFACE_CONNECTIONROUTER" >
			</context>	
		</creationtool>
		<creationtool id="CREATE_COMPOSITION" label="%Composition.label" tooltip="%Composition.tooltip" interactor="link" icon="icons/composition.png" >
			<context metaclass="AssociationEnd" dependency="null" router="ASSOC_CONNECTIONROUTER">
				<property name="aggregation" value="KINDISCOMPOSITION"/>
			</context>	
		</creationtool>
		<creationtool id="CREATE_AGGREGATION" label="%Aggregation.label" tooltip="%Aggregation.tooltip" interactor="link" icon="icons/agregation.png">
			<context metaclass="AssociationEnd" dependency="null" router="ASSOC_CONNECTIONROUTER">
				<property name="aggregation" value="KINDISAGGREGATION"/>
			</context>	
		</creationtool>
		<creationtool id="CREATE_ASSOCIATION" label="%Association.label" tooltip="%Association.tooltip" interactor="link">
			<context metaclass="AssociationEnd" dependency="null" router="ASSOC_CONNECTIONROUTER">
			</context>	
		</creationtool>
		<creationtool id="CREATE_COLLABORATIONUSE_LINK" label="%CollaborationUse.label" tooltip="%CollaborationUse.tooltip" interactor="link">
			<context metaclass="CollaborationUse" dependency="null" router="COLLABORATIONUSELINK_CONNECTIONROUTER" />
		</creationtool>
		<creationtool id="CREATE_BINDING" label="%Binding.label" tooltip="%Binding.tooltip" interactor="link">
			<context metaclass="Binding" dependency="RoleBinding" router="BINDINGLINK_CONNECTIONROUTER">
			</context>	
		</creationtool>
		<creationtool id="CREATE_CLASSASSOCIATION" label="%ClassAssociation.label" tooltip="%ClassAssociation.tooltip" interactor="link">
			<context metaclass="ClassAssociation" dependency="LinkToClass" router="CLASSASSOC_CONNECTIONROUTER">
			</context>	
		</creationtool>
		<creationtool id="CREATE_DEPENDENCY" label="%Dependency.label" tooltip="%Dependency.tooltip" interactor="link">
			<context metaclass="Dependency" dependency="null" router="DEPENDENCY_CONNECTIONROUTER">
			</context>	
		</creationtool>
		<creationtool id="CREATE_ELEMENTIMPORT" label="%ElementImport.label" tooltip="%ElementImport.tooltip" interactor="link">
			<context metaclass="ElementImport" dependency="OwnedImport" router="IMPORT_CONNECTIONROUTER">
			</context>	
		</creationtool>
		<creationtool id="CREATE_RAISEDEXCEPTION" label="%RaisedException.label" tooltip="%RaisedException.tooltip" interactor="link">
			<context metaclass="RaisedException" dependency="Thrown" router="RAISEDEXCEPTION_CONNECTIONROUTER">
			</context>	
		</creationtool>
		<creationtool id="CREATE_INTERFACEREALIZATION" label="%InterfaceRealization.label" tooltip="%InterfaceRealization.tooltip" interactor="link">
			<context metaclass="InterfaceRealization" dependency="null" router="INTERFACEREALIZATION_CONNECTIONROUTER">
			</context>	
		</creationtool>
		<creationtool id="CREATE_INFORMATIONFLOW" label="%InformationFlow.label" tooltip="%InformationFlow.tooltip" interactor="link">
			<context metaclass="InformationFlow" dependency="OwnedInformationFlow" router="INFOFLOWLINK_CONNECTIONROUTER">
			</context>	
		</creationtool>
		<creationtool id="CREATE_SMARTGENERALIZATION" label="%SmartGeneralization.label" tooltip="%SmartGeneralization.tooltip" interactor="link" icon="icons/smartgeneralization.png">
			<context metaclass="Generalization" dependency="null" router="GENZ_CONNECTIONROUTER">
				<property name="smart" value="true" /> 
				<property name="Generalization.router" value="GENZ_CONNECTIONROUTER" /> <!-- Not used (yet?) -->
				<property name="InterfaceRealization.router" value="INTERFACEREALIZATION_CONNECTIONROUTER" />  <!-- Not used (yet?) -->
			</context>
		</creationtool>
		<creationtool id="CREATE_GENERALIZATION" label="%Generalization.label" tooltip="%Generalization.tooltip" interactor="link">
			<context metaclass="Generalization" dependency="null" router="GENZ_CONNECTIONROUTER">
			</context>	
		</creationtool>
		<creationtool id="CREATE_INSTANCELINK" label="%Link.label" tooltip="%Link.tooltip" interactor="link">
			<context metaclass="LinkEnd" dependency="null" router="INSTANCELINK_CONNECTIONROUTER">
			</context>	
		</creationtool>
		<creationtool id="CREATE_DELEGATELINK" label="%DelegateLink.label" tooltip="%DelegateLink.tooltip" interactor="link" icon="icons/link.delegate.png">
			<context metaclass="ConnectorEnd" dependency="null" router="CONNECTOR_CONNECTIONROUTER">
   			</context> 
  		</creationtool>
		<creationtool id="CREATE_CONNECTOR" label="%Connector.label" tooltip="%Connector.tooltip" interactor="link" icon="icons/connector.png">
 			<context metaclass="ConnectorEnd" dependency="null" router="CONNECTOR_CONNECTIONROUTER">
 			</context> 
 		</creationtool>
		<creationtool id="CREATE_NARY_ASSOCIATION" label="%NaryAssociation.label" tooltip="%NaryAssociation.tooltip" interactor="multipoint" icon="icons/naryassociation.png">
			<context metaclass="NaryAssociation" dependency="null" router="NASSOC_CONNECTIONROUTER">
			</context>	
		</creationtool>
		<creationtool id="CREATE_NARY_INSTANCELINK" label="%NaryLink.label" tooltip="%NaryLink.tooltip" interactor="multipoint" icon="icons/narylink.png">
			<context metaclass="NaryLink" dependency="null"  router="NINSTANCELINK_CONNECTIONROUTER">
			</context>	
		</creationtool>
		<creationtool id="CREATE_NARY_CONNECTOR" label="%NaryConnector.label" tooltip="%NaryConnector.tooltip" interactor="multipoint" icon="icons/narylink.png">
			<context metaclass="NaryConnector" dependency="null"  router="NCONNECTOR_CONNECTIONROUTER">
			</context>	
		</creationtool>
		<creationtool id="CREATE_PACKAGEIMPORT" label="%PackageImport.label" tooltip="%PackageImport.tooltip" interactor="link">
			<context metaclass="PackageImport" dependency="OwnedPackageImport" router="PACKAGEIMPORT_CONNECTIONROUTER">
			</context>	
		</creationtool>
		<creationtool id="CREATE_PACKAGEMERGE" label="%PackageMerge.label" tooltip="%PackageMerge.tooltip" interactor="link">
			<context metaclass="PackageMerge" dependency="Merge" router="PACKAGEMERGE_CONNECTIONROUTER">
			</context>	
		</creationtool>
		<creationtool id="CREATE_TRACEABILITY" label="%Traceability.label" tooltip="%Traceability.tooltip" interactor="link" icon="icons/traceability.png">
			<context metaclass="Dependency" stereotype="trace" router="DEPENDENCY_CONNECTIONROUTER">
			</context>	
		</creationtool>
		
		<!-- Dependency like links -->
		<creationtool id="CREATE_USE" label="%Use.label" tooltip="%Use.tooltip" interactor="link">
			<context metaclass="Usage" dependency="null" router="DEPENDENCY_CONNECTIONROUTER">
			</context>	
		</creationtool>
		<creationtool id="CREATE_ABSTRACTION" label="%Abstraction.label" tooltip="%Abstraction.tooltip" interactor="link">
			<context metaclass="Abstraction" dependency="null" router="DEPENDENCY_CONNECTIONROUTER">
			</context>	
		</creationtool>
		<creationtool id="CREATE_ELEMENTREALIZATION" label="%ElementRealization.label" tooltip="%ElementRealization.tooltip" interactor="link">
			<context metaclass="ElementRealization" dependency="null" router="DEPENDENCY_CONNECTIONROUTER">
			</context>	
		</creationtool>
		<creationtool id="CREATE_COMPONENTREALIZATION" label="%ComponentRealization.label" tooltip="%ComponentRealization.tooltip" interactor="link">
			<context metaclass="ComponentRealization" dependency="null" router="DEPENDENCY_CONNECTIONROUTER">
			</context>	
		</creationtool>
		<creationtool id="CREATE_SUBSTITUTION" label="%Substitution.label" tooltip="%Substitution.tooltip" interactor="link">
			<context metaclass="Substitution" dependency="null" router="DEPENDENCY_CONNECTIONROUTER">
			</context>	
		</creationtool>
		
		<!-- Notes & co -->
        <creationtool id="CREATE_NOTE" label="%Note.label" tooltip="%Note.tooltip"  interactor="linkedNode">
			<context metaclass="Note" dependency="Descriptor"/>
		</creationtool>
		
		<creationtool id="CREATE_EXTERNDOCUMENT" label="%ExternDocument.label" tooltip="%ExternDocument.tooltip"  interactor="linkedNode">
			<context metaclass="ExternDocument" dependency="Descriptor"/>
		</creationtool>
		
        <creationtool id="CREATE_RELATED_DIAGRAM_LINK" label="%RelatedDiagramLink.label" tooltip="%RelatedDiagramLink.tooltip" interactor="linkedNode" icon="icons/relateddiagram.png">
			<context metaclass="Dependency" dependency="DependsOnDependency" stereotype="related_diagram" router="DEPENDENCY_CONNECTIONROUTER">
				<!--property name="" value="/-->
			</context>
		</creationtool>
		
		<creationtool id="CREATE_TEMPLATEPARAMETER" label="%TemplateParameter.label" tooltip="%TemplateParameter.tooltip" interactor="node">
			<context metaclass="TemplateParameter" dependency="Template" />
		</creationtool>
		
 	    <creationtool id="CREATE_TEMPLATEBINDING"
				      interactor="link"
				      label="%TemplateBinding.label"
				      tooltip="%TemplateBinding.tooltip">
		    <context metaclass="TemplateBinding" router="TEMPLATEBINDING_CONNECTIONROUTER"/>
	    </creationtool>
    </extension>
</plugin>
